<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Dice</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body { margin:0; font-family: 'Press Start 2P', monospace; background:#121212; color:white; text-align:center; overflow-x:hidden; }
#gameContainer { width:900px; margin:0 auto; padding:20px; display:flex; flex-direction:column; align-items:center; }
.panel { background:#1c1c1c; border:4px solid #333; border-radius:8px; padding:12px; margin:10px 0; width:100%; }
button { font-family: 'Press Start 2P'; padding:10px; margin:5px; border:3px solid #555; background:#2a2a2a; color:white; cursor:pointer; }
button:hover { background:#3d3d3d; }
canvas { image-rendering:pixelated; border:3px solid #444; margin:10px 0; }
#shopGrid { display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:10px; }
.upgradeItem { background:#262626; border:2px solid #444; padding:8px; border-radius:6px; }
</style>
</head>
<body>
<div id="gameContainer">
<h1>AI Dice</h1>
<canvas id="diceCanvas" width="128" height="128"></canvas>
<button id="rollBtn">ROLL</button>
<div class="panel" id="statsPanel">
  <div id="points">Points: 0</div>
  <div id="level">Level: 1</div>
  <div id="xp">XP: 0</div>
  <div id="prestige">Prestige: 0</div>
</div>
<div class="panel" id="shopPanel">
<h2>Upgrades</h2>
<div id="shopGrid"></div>
</div>
<div class="panel" id="helpersPanel">
<h2>Helpers</h2>
<div id="helpers">0 helpers</div>
</div>
<div class="panel" id="achievementsPanel">
<h2>Achievements</h2>
<div id="achievements"></div>
</div>
<button id="resetBtn">RESET SAVE</button>
</div>
<script>
// =========================
// Game State
// =========================
let state = {
  points:0, diceLevel:1, helpers:0, level:1, xp:0, prestige:0,
  upgradeDiceCost:10, helperCost:25,
  shop:[], achievements:[], autoRollInterval:null
};

// Initialize Shop Items
state.shop = [
  {name:'Upgrade Dice', cost:10, action:()=>{state.diceLevel++; state.upgradeDiceCost=Math.floor(state.upgradeDiceCost*1.8); updateUI(); saveGame();}},
  {name:'Helper Hand', cost:25, action:()=>{state.helpers++; state.helperCost=Math.floor(state.helperCost*1.6); updateUI(); saveGame();}}
];

// =========================
// Dice Canvas
// =========================
const canvas=document.getElementById('diceCanvas');
const ctx=canvas.getContext('2d');
function drawDiceFace(val){
  ctx.fillStyle='#000'; ctx.fillRect(0,0,128,128);
  ctx.fillStyle='#fff'; ctx.fillRect(8,8,112,112);
  ctx.fillStyle='#000';
  const dots={1:[[64,64]],2:[[40,40],[88,88]],3:[[40,40],[64,64],[88,88]],4:[[40,40],[40,88],[88,40],[88,88]],5:[[40,40],[40,88],[64,64],[88,40],[88,88]],6:[[40,40],[40,64],[40,88],[88,40],[88,64],[88,88]]};
  dots[val].forEach(d=>ctx.fillRect(d[0]-6,d[1]-6,12,12));
}

// =========================
// Roll Mechanic
// =========================
function rollDice(){
  const maxRoll=6+(state.diceLevel-1);
  const roll=Math.floor(Math.random()*maxRoll)+1;
  drawDiceFace(Math.min(roll,6));
  state.points+=roll;
  state.xp+=roll;
  checkLevelUp();
  updateUI();
  saveGame();
}

function checkLevelUp(){
  const needed=state.level*50;
  if(state.xp>=needed){ state.xp-=needed; state.level++; state.points+=20; updateUI(); saveGame(); }
}

// =========================
// Shop
// =========================
const shopGrid=document.getElementById('shopGrid');
function renderShop(){
  shopGrid.innerHTML='';
  state.shop.forEach((item,i)=>{
    const div=document.createElement('div'); div.className='upgradeItem';
    div.innerHTML=`<strong>${item.name}</strong><br>Cost: ${item.cost}`;
    const btn=document.createElement('button'); btn.innerText='BUY';
    btn.onclick=()=>{if(state.points>=item.cost){state.points-=item.cost; item.action();}};
    div.appendChild(btn);
    shopGrid.appendChild(div);
  });
}

// =========================
// Auto Helpers
// =========================
setInterval(()=>{
  if(state.helpers>0){ state.points+=state.helpers; state.xp+=state.helpers; checkLevelUp(); updateUI(); saveGame(); }
},1000);

// =========================
// Save & Load
// =========================
function saveGame(){
  localStorage.setItem('aiDiceSave', JSON.stringify(state));
}
function loadGame(){
  const data=localStorage.getItem('aiDiceSave');
  if(!data) return;
  state=JSON.parse(data);
  renderShop(); updateUI();
}
function resetGame(){ localStorage.removeItem('aiDiceSave'); location.reload(); }
setInterval(saveGame,3000);
loadGame();

// =========================
// UI Update
// =========================
function updateUI(){
  document.getElementById('points').innerText='Points: '+state.points;
  document.getElementById('level').innerText='Level: '+state.level;
  document.getElementById('xp').innerText='XP: '+state.xp;
  document.getElementById('prestige').innerText='Prestige: '+state.prestige;
  document.getElementById('helpers').innerText=state.helpers+' helpers';
}

// =========================
// Event Listeners
// =========================
document.getElementById('rollBtn').addEventListener('click',rollDice);
document.getElementById('resetBtn').addEventListener('click',resetGame);
renderShop(); updateUI();
</script>
</body>
</html>
